<!DOCTYPE html>
<html>
<head lang="en">
    {% load b32encode split %}
    <meta charset="UTF-8">
    <title></title>
</head>
<body>
    <h1>Search S3 cache files</h1>
    <p>
        <form method="GET" action=".">
            <input name="searchterm" type="text" placeholder="Enter a part of filename, like Job ID or server name" {% if searchterm %}value="{{ searchterm }}"{% endif %} style="width:400px"/>
            <button type="submit">Search</button>
        </form>
    </p>
    {% if error %}<p style="color:red">{{ error }}</p>{% endif %}
    {% if warning %}<p style="font-weight: bold">{{ warning }}</p>{% endif %}

    {% if searchterm %}<h4>Found files</h4>{% endif %}
    {% for result in results %}
        <a href="{% url 'render-s3-cache' %}?file={{ result|b32encode }}">
            {% with result|split:"__MARKER_URL__" as split_fname %}
                {{ split_fname.1 }}
            {% endwith %}
        </a> <br/>
    {% endfor %}
</body>
</html>